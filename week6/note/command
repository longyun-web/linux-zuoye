rlk@ubuntu:staticlib$ ls
fun1.c  fun2.c  fun3.c  lib.h  libmytestlib.a  test.c
rlk@ubuntu:staticlib$ ar -t libmytestlib.a fun1.o fun2.o fun3.o
fun1.o
fun2.o
fun3.o
rlk@ubuntu:staticlib$ ls
fun1.c  fun2.c  fun3.c  lib.h  libmytestlib.a  test.c
rlk@ubuntu:staticlib$ gcc -c fun1.c fun2.c fun3.c
rlk@ubuntu:staticlib$ ar -ra fun1.o libmytestlib.a fun2.o fun3.o
rlk@ubuntu:staticlib$ ls
fun1.c  fun1.o  fun2.c  fun2.o  fun3.c  fun3.o  lib.h  libmytestlib.a  test.c
rlk@ubuntu:staticlib$ gcc -o test test.c -L. -lmytestlib
rlk@ubuntu:staticlib$ ls
fun1.c  fun2.c  fun3.c  lib.h           test
fun1.o  fun2.o  fun3.o  libmytestlib.a  test.c
rlk@ubuntu:staticlib$ ./test
max=100
sum=4962
rlk@ubuntu:staticlib$ cd ../
rlk@ubuntu:code$ cp staticlib/test.c exam
rlk@ubuntu:code$ cd exam
rlk@ubuntu:exam$ ls
test.c
rlk@ubuntu:exam$ gcc -o test test.c -L../staticlib -lmytestlib -I../staticlib
rlk@ubuntu:exam$ cd ../dynamiclib/
rlk@ubuntu:dynamiclib$ ls
fun1.c  fun2.c  fun3.c  lib.h  test.c
rlk@ubuntu:dynamiclib$ cp ../staticlib/test.c ./
rlk@ubuntu:dynamiclib$ cat test.c
#include "lib.h"

#define NUMBER 100

int main()
{
	int a[NUMBER];
	
	urand(a,NUMBER);
	printf("max=%d\n",max(a,NUMBER));
	printf("sum=%d\n",sum(a,NUMBER));

	return 0;
}
rlk@ubuntu:dynamiclib$ gcc -shared -fPIC -o libdynamic.so fun1.c fun2.c fun3.c
rlk@ubuntu:dynamiclib$ ls
fun1.c  fun2.c  fun3.c  libdynamic.so  lib.h  test.c
rlk@ubuntu:dynamiclib$ gcc -o test test.c ./libdynamic.so
rlk@ubuntu:dynamiclib$ ./test
max=99
sum=4926
rlk@ubuntu:dynamiclib$ cd ../exam/
rlk@ubuntu:exam$ ls
test  test.c
rlk@ubuntu:exam$ gcc -o dltest test.c ../dynamiclib/libdynamic.so -I../dynamiclib
rlk@ubuntu:exam$ ls
dltest  test  test.c
rlk@ubuntu:exam$ ./dltest
max=100
sum=5655
rlk@ubuntu:exam$ gcc -rdynamic -o dltest2 test2.c -ldl -I../dynamiclib./
rlk@ubuntu:exam$ ./dltest2
max=100
sum=5054
rlk@ubuntu:exam$ 
